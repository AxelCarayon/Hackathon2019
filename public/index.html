<!doctype html>
<html>
  <meta charset="utf-8">
    <title>Application Hackathon</title>
    <meta name="description" content="???">
    <meta name="author" content="David Panzoli">
    
    <link rel = "stylesheet" type = "text/css" href = "config.css" />
    <link rel = "stylesheet" type = "text/css" href = "/packages/bootstrap/dist/css/bootstrap.css" />
    <script src="/packages/jquery/dist/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mustache.js/0.8.1/mustache.min.js"></script>
    <script src="/packages/angular/angular.min.js"></script>
    <script src="/packages/bootstrap/dist/js/bootstrap.js"></script>
</head>
<body ng-app="gpecApp" ng-controller="controleur">
	<div class="container">
            <h1>Application client</h1>
            
            <div id="timelineEvent">
                <!-- main timeline section -->
                <section id="cd-timeline" class="cd-container cssanimations">
                    <div id="event"></div>
                </section>
            </div>
	</div>
    </body>
    <script id="ajoutEvent">
        {{#evenement}}
            <!-- single timeline event -->
            <div class="cd-timeline-block">
                <div class="cd-timeline-img cd-picture">
                    <img src="event.png" />
                </div>
                <div class="cd-timeline-content">
                    <h2>{{description}}</h2>
                    <p>{{nom}} {{prenoms}}<br/>
                       {{Poste}}</p>
                    <span class="cd-date">{{date_ev}}</span>
                </div>
            </div>
        {{/evenement}}
    </script>
    <script>
        //either use jQuery or AngularJS...
	$(document).ready(function() {
            $.ajax({
                method: 'GET',
                url: 'test_evenements',
		dataType: 'json',
                    success: function(data) {
                        var template = $('#ajoutEvent').html();
                        var processedTemplate = Mustache.to_html(template, data);
                        $('#event').html(processedTemplate);
                    },
                    error: function(x, error) {
                            console.log(error);
                        }
                    });
        });

        var app = angular.module('gpecApp', []);
		
        app.controller('controleur', function($scope, $http) {

            $http.get('/personnels').then(function(response) {
                $scope.personnels = response.data;
            });

        });


        $(window).on('scroll', function(){
            $('.cd-timeline-block').each(function(){
                if( $(this).offset().top <= $(window).scrollTop()+$(window).height()*0.75 && $(this).find('.cd-timeline-img').hasClass('is-hidden') ) {
                    $(this).find('.cd-timeline-img, .cd-timeline-content').removeClass('is-hidden').addClass('bounce-in');
                }
            });
        });
    </script>
</html>

